import"../chunks/DsnmJJEf.js";import{o as h,a as E,s as y}from"../chunks/DbbzO-B6.js";import{p as L,a as n,a3 as b,f as x,c as j,d as k,e as o,r as t}from"../chunks/813Ht5r7.js";import{o as C,f as S}from"../chunks/BrdxJ9sT.js";import{s as T}from"../chunks/dkFZ6RT-.js";import{n as _}from"../chunks/CRmmrOlb.js";var A=x('<div class="flex h-screen w-screen flex-col gap-5"><main class="flex-1 bg-blue-900"><div class="flex h-full w-full items-center justify-center"><!></div></main></div>');function z(u,r){L(r,!0);const l=n({value:!0}),c=n({value:!0});let d=n({value:void 0});const m=n({value:""}),p=n({value:_.complete!==null});async function w(){const s=await fetch("/api/session",{method:"GET",credentials:"same-origin"});s.status===200&&await s.json()}function e(){l.value=navigator.onLine}b("App",{isOnline:l,isLoading:p,rememberMe:c,user:d,error:m}),h(()=>{"serviceWorker"in navigator&&addEventListener("load",function(){navigator.serviceWorker.register("../service-worker.js")});const s=C(S.auth,i=>{i&&(d.value=i,T(i))});return e(),window.addEventListener("online",e),window.addEventListener("offline",e),w(),()=>{s(),window.removeEventListener("online",e),window.removeEventListener("offline",e)}}),E(()=>{c.value||(async()=>await fetch("/api/session",{method:"DELETE",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:""}))()});var a=A(),v=o(a),f=o(v),g=o(f);y(g,()=>r.children),t(f),t(v),t(a),j(u,a),k()}export{z as component};
