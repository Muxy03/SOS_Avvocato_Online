import"../chunks/DsnmJJEf.js";import{o as me}from"../chunks/BkzrqWM-.js";import{o as O,q as _e,av as pe,u as xe,aw as J,H as ge,x as he,y as be,z as Q,ax as V,M as H,L as W,K as X,D as U,_ as ye,A as we,ay as $,az as ee,aA as ae,a8 as ke,N as te,O as q,aq as Ne,f as _,d as i,r as n,t as ne,b as u,p as Ae,a as j,j as Ie,i as re,c as Oe,s as x,l as je,g as De,h as Ee,k as Le}from"../chunks/D50pdiVl.js";import{d as Te,s as C}from"../chunks/BExVpiIy.js";import{i as D}from"../chunks/CIBJ9sE4.js";import{n as se}from"../chunks/CEylPTDC.js";import"../chunks/5M6kmaMY.js";import{s as Se}from"../chunks/pAYp49zD.js";import{l as ze}from"../chunks/DuaHpsb3.js";import{a as He,f as Ue}from"../chunks/CrL3HiYF.js";import{c as ie,g as qe}from"../chunks/Dchouehq.js";import{O as G}from"../chunks/BRRXS_64.js";const M=0,E=1,R=2;function Ce(p,o,e,g,y){O&&_e();var c=p,w=pe(),k=ke,t=V,l,v,h,b=w?W(void 0):X(void 0,!1,!1),N=w?W(void 0):X(void 0,!1,!1),a=!1;function s(r,f){a=!0,f&&($(A),ee(A),ae(k));try{r===M&&e&&(l?te(l):l=U(()=>e(c))),r===E&&g&&(v?te(v):v=U(()=>g(c,b))),r!==M&&l&&q(l,()=>l=null),r!==E&&v&&q(v,()=>v=null),r!==R&&h&&q(h,()=>h=null)}finally{f&&(ae(null),ee(null),$(null),Ne())}}var A=xe(()=>{if(t===(t=o()))return;let r=O&&J(t)===(c.data===ge);if(r&&(c=he(),be(c),Q(!1),r=!0),J(t)){var f=t;a=!1,f.then(d=>{f===t&&(H(b,d),s(E,!0))},d=>{if(f===t)throw H(N,d),s(R,!0),N.v}),O?e&&(l=U(()=>e(c))):ye(()=>{a||s(M,!0)})}else H(b,t),s(E,!1);return r&&Q(!0),()=>t=V});O&&(c=we)}var Ge=_('<div class="min-w-screen imtes-center flex min-h-screen justify-center"><img alt="Logo" class="animate-ping" width="100" height="100"/></div>');function Me(p){var o=Ge(),e=i(o);n(o),ne(()=>Se(e,"src",ze)),u(p,o)}var Re=_('<div class="offline-banner"><span class="offline-icon">ðŸ“¶</span> ModalitÃ  offline</div>'),Fe=_('<div class="flex items-center justify-center gap-2 rounded-xl bg-yellow-100 text-center text-sm text-yellow-800"><span class="rounded bg-yellow-500 text-xs font-semibold text-white">Offline</span> Dati memorizzati localmente</div>'),Pe=_('<a href="/home" target="_self" rel="noopener noreferrer" aria-label="/home" class="w-full"><div class="flex h-[60px] w-[280px] items-center gap-1 rounded-2xl bg-blue-500"><div class="flex-1/4 flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 text-sm font-bold text-white"> </div> <div class="flex-3/4 w-full text-center"><h2 class="break-words text-xl font-bold text-white"> </h2> <p class="break-all text-sm text-white"> </p></div></div></a>'),Be=_("<p>LOADING...</p>"),Ke=async(p,o,e)=>{await o(),e()},Ye=_('<div class="animate-slideUp mx-auto flex h-[250px] w-[300px] flex-col items-center justify-center gap-4 rounded-2xl bg-white text-gray-900 shadow-2xl"><h1 class="text-3xl font-extrabold tracking-tight text-gray-800">Bentornato!</h1> <div class="flex flex-col items-center justify-center gap-4"><div class="flex flex-col items-center gap-5 text-center"><!> <!></div></div> <div class="flex flex-col gap-4"><button type="button" class="rounded-xl border-2 border-gray-200 bg-gray-100 px-6 py-4 text-base font-semibold text-slate-600 transition hover:border-gray-300 hover:bg-gray-200">Disconnetti</button></div></div>'),Ze=_("<!> <!>",1);function na(p,o){Ae(o,!0),j({value:!0});let e=j({value:void 0}),g=Ie(j({value:""}));const y=j({value:se.complete!==null});y.value=se.complete!==null,e.value=o.data;async function c(){try{await He(Ue.auth),await ie(),e.value=void 0}catch{G.value?Le(g).value="Errore durante la disconnessione. Riprova.":(e.value=void 0,await ie())}}const w=()=>{window.location.reload()};async function k(){const a=await fetch("/api/session",{method:"GET",credentials:"same-origin"});if(a.status===200){const s=await a.json();e.value=s}}me(()=>{je(g,De("App"),!0),k()});var t=Ze(),l=re(t);{var v=a=>{var s=Re();u(a,s)};D(l,a=>{G.value||a(v)})}var h=x(l,2);{var b=a=>{Me(a)},N=a=>{var s=Ee(),A=re(s);{var r=f=>{var d=Ye(),L=x(i(d),2),F=i(L),P=i(F);{var oe=m=>{var I=Fe();u(m,I)};D(P,m=>{G.value||m(oe)})}var le=x(P,2);Ce(le,k,m=>{var I=Be();u(m,I)},(m,I)=>{var T=Pe(),K=i(T),S=i(K),ce=i(S,!0);n(S);var Y=x(S,2),z=i(Y),ve=i(z,!0);n(z);var Z=x(z,2),ue=i(Z,!0);n(Z),n(Y),n(K),n(T),ne(de=>{C(ce,de),C(ve,e.value.FullName),C(ue,e.value.email)},[()=>qe(e.value.FullName,e.value.email)]),u(m,T)}),n(F),n(L);var B=x(L,2),fe=i(B);fe.__click=[Ke,c,w],n(B),n(d),u(f,d)};D(A,f=>{e.value!==void 0&&f(r)},!0)}u(a,s)};D(h,a=>{y.value?a(b):a(N,!1)})}u(p,t),Oe()}Te(["click"]);export{na as component};
