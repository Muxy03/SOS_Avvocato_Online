import"../chunks/DsnmJJEf.js";import{k as E,l as me,aH as _e,m as pe,aI as Y,H as xe,q as ge,u as he,v as Z,a2 as Q,I as G,G as V,F as X,y as U,W as be,w as ye,aJ as $,aK as ee,aL as ae,a9 as we,J as te,K as F,aB as ke,f as _,d as i,r as l,t as le,b as u,p as Ie,a as L,g as re,c as Ne,s as x,e as Ee}from"../chunks/7vUO3RyR.js";import{d as Le,s as R}from"../chunks/DlUQHRdJ.js";import{i as O}from"../chunks/Cs_X23zF.js";import{n as se}from"../chunks/DTi2sDqs.js";import"../chunks/BYxMzdyx.js";import{s as Oe}from"../chunks/Cn7woczV.js";import{l as Te}from"../chunks/DuaHpsb3.js";import{a as je,f as De}from"../chunks/CrL3HiYF.js";import{c as ie,g as Se}from"../chunks/Dchouehq.js";import{O as q}from"../chunks/D3ORrAI7.js";const z=0,T=1,B=2;function Ae(p,n,e,b,y){E&&me();var c=p,w=_e(),j=we,t=Q,o,v,g,h=w?V(void 0):X(void 0,!1,!1),k=w?V(void 0):X(void 0,!1,!1),a=!1;function s(r,f){a=!0,f&&($(I),ee(I),ae(j));try{r===z&&e&&(o?te(o):o=U(()=>e(c))),r===T&&b&&(v?te(v):v=U(()=>b(c,h))),r!==z&&o&&F(o,()=>o=null),r!==T&&v&&F(v,()=>v=null),r!==B&&g&&F(g,()=>g=null)}finally{f&&(ae(null),ee(null),$(null),ke())}}var I=pe(()=>{if(t===(t=n()))return;let r=E&&Y(t)===(c.data===xe);if(r&&(c=ge(),he(c),Z(!1),r=!0),Y(t)){var f=t;a=!1,f.then(d=>{f===t&&(G(h,d),s(T,!0))},d=>{if(f===t)throw G(k,d),s(B,!0),k.v}),E?e&&(o=U(()=>e(c))):be(()=>{a||s(z,!0)})}else G(h,t),s(T,!1);return r&&Z(!0),()=>t=Q});E&&(c=ye)}var He=_('<div class="min-w-screen imtes-center flex min-h-screen justify-center"><img alt="Logo" class="animate-ping" width="100" height="100"/></div>');function Ge(p){var n=He(),e=i(n);l(n),le(()=>Oe(e,"src",Te)),u(p,n)}var Ue=_('<div class="offline-banner"><span class="offline-icon">ðŸ“¶</span> ModalitÃ  offline</div>'),Fe=_('<div class="flex items-center justify-center gap-2 rounded-xl bg-yellow-100 text-center text-sm text-yellow-800"><span class="rounded bg-yellow-500 text-xs font-semibold text-white">Offline</span> Dati memorizzati localmente</div>'),Re=_('<a href="/home" target="_self" rel="noopener noreferrer" aria-label="/home" class="w-full"><div class="flex h-[60px] w-[280px] items-center gap-1 rounded-2xl bg-blue-500"><div class="flex-1/4 flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 text-sm font-bold text-white"> </div> <div class="flex-3/4 w-full text-center"><h2 class="break-words text-xl font-bold text-white"> </h2> <p class="break-all text-sm text-white"> </p></div></div></a>'),qe=_("<p>LOADING...</p>"),ze=async(p,n,e)=>{await n(),e()},Be=_('<div class="animate-slideUp mx-auto flex h-[250px] w-[300px] flex-col items-center justify-center gap-4 rounded-2xl bg-white text-gray-900 shadow-2xl"><h1 class="text-3xl font-extrabold tracking-tight text-gray-800">Bentornato!</h1> <div class="flex flex-col items-center justify-center gap-4"><div class="flex flex-col items-center gap-5 text-center"><!> <!></div></div> <div class="flex flex-col gap-4"><button type="button" class="rounded-xl border-2 border-gray-200 bg-gray-100 px-6 py-4 text-base font-semibold text-slate-600 transition hover:border-gray-300 hover:bg-gray-200">Disconnetti</button></div></div>'),Ce=_("<!> <!>",1);function ea(p,n){Ie(n,!0),L({value:!0});let e=L({value:void 0});const b=L({value:""}),y=L({value:se.complete!==null});y.value=se.complete!==null,e.value=n.data;async function c(){try{await je(De.auth),await ie(),e.value=void 0}catch{q.value?b.value="Errore durante la disconnessione. Riprova.":(e.value=void 0,await ie())}}const w=()=>{window.location.reload()};async function j(){const a=await fetch("/api/session",{method:"GET",credentials:"same-origin"});if(a.status===200){const s=await a.json();e.value=s}}var t=Ce(),o=re(t);{var v=a=>{var s=Ue();u(a,s)};O(o,a=>{q.value||a(v)})}var g=x(o,2);{var h=a=>{Ge(a)},k=a=>{var s=Ee(),I=re(s);{var r=f=>{var d=Be(),D=x(i(d),2),C=i(D),J=i(C);{var ne=m=>{var N=Fe();u(m,N)};O(J,m=>{q.value||m(ne)})}var oe=x(J,2);Ae(oe,j,m=>{var N=qe();u(m,N)},(m,N)=>{var S=Re(),P=i(S),A=i(P),ce=i(A,!0);l(A);var M=x(A,2),H=i(M),ve=i(H,!0);l(H);var W=x(H,2),ue=i(W,!0);l(W),l(M),l(P),l(S),le(de=>{R(ce,de),R(ve,e.value.FullName),R(ue,e.value.email)},[()=>Se(e.value.FullName,e.value.email)]),u(m,S)}),l(C),l(D);var K=x(D,2),fe=i(K);fe.__click=[ze,c,w],l(K),l(d),u(f,d)};O(I,f=>{e.value!==void 0&&f(r)},!0)}u(a,s)};O(g,a=>{y.value?a(h):a(k,!1)})}u(p,t),Ne()}Le(["click"]);export{ea as component};
