import"../chunks/DsnmJJEf.js";import{o as me}from"../chunks/DL7c-2PW.js";import{l as j,m as _e,av as pe,o as xe,aw as Z,H as ge,v as he,w as be,x as Q,ax as V,K as U,J as W,I as X,A as z,Y as ye,y as we,ay as $,az as ee,aA as ae,a7 as ke,L as te,M as C,ap as Ie,f as _,d as i,r as n,t as ne,b as u,p as Ne,a as E,h as Ae,g as re,c as je,s as x,j as Ee,ar as Le,e as Oe,i as Te}from"../chunks/hMZFjhjB.js";import{d as De,s as G}from"../chunks/C3vF11sT.js";import{i as L}from"../chunks/DO9TSQkw.js";import{n as se}from"../chunks/CWuZaM_Z.js";import"../chunks/cmOnixpf.js";import{s as Se}from"../chunks/2gOuTNXT.js";import{l as He}from"../chunks/DuaHpsb3.js";import{a as Ue,f as ze}from"../chunks/CrL3HiYF.js";import{c as ie,g as Ce}from"../chunks/Dchouehq.js";import{O as M}from"../chunks/THKFehzh.js";const R=0,O=1,F=2;function Ge(p,o,e,g,y){j&&_e();var c=p,w=pe(),k=ke,t=V,l,v,h,b=w?W(void 0):X(void 0,!1,!1),I=w?W(void 0):X(void 0,!1,!1),a=!1;function s(r,f){a=!0,f&&($(N),ee(N),ae(k));try{r===R&&e&&(l?te(l):l=z(()=>e(c))),r===O&&g&&(v?te(v):v=z(()=>g(c,b))),r!==R&&l&&C(l,()=>l=null),r!==O&&v&&C(v,()=>v=null),r!==F&&h&&C(h,()=>h=null)}finally{f&&(ae(null),ee(null),$(null),Ie())}}var N=xe(()=>{if(t===(t=o()))return;let r=j&&Z(t)===(c.data===ge);if(r&&(c=he(),be(c),Q(!1),r=!0),Z(t)){var f=t;a=!1,f.then(d=>{f===t&&(U(b,d),s(O,!0))},d=>{if(f===t)throw U(I,d),s(F,!0),I.v}),j?e&&(l=z(()=>e(c))):ye(()=>{a||s(R,!0)})}else U(b,t),s(O,!1);return r&&Q(!0),()=>t=V});j&&(c=we)}var Me=_('<div class="min-w-screen imtes-center flex min-h-screen justify-center"><img alt="Logo" class="animate-ping" width="100" height="100"/></div>');function Re(p){var o=Me(),e=i(o);n(o),ne(()=>Se(e,"src",He)),u(p,o)}var Fe=_('<div class="offline-banner"><span class="offline-icon">ðŸ“¶</span> ModalitÃ  offline</div>'),Pe=_('<div class="flex items-center justify-center gap-2 rounded-xl bg-yellow-100 text-center text-sm text-yellow-800"><span class="rounded bg-yellow-500 text-xs font-semibold text-white">Offline</span> Dati memorizzati localmente</div>'),Ye=_('<a href="/home" target="_self" rel="noopener noreferrer" aria-label="/home" class="w-full"><div class="flex h-[60px] w-[280px] items-center gap-1 rounded-2xl bg-blue-500"><div class="flex-1/4 flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 text-sm font-bold text-white"> </div> <div class="flex-3/4 w-full text-center"><h2 class="break-words text-xl font-bold text-white"> </h2> <p class="break-all text-sm text-white"> </p></div></div></a>'),qe=_("<p>LOADING...</p>"),Be=async(p,o,e)=>{await o(),e()},Je=_('<div class="animate-slideUp mx-auto flex h-[250px] w-[300px] flex-col items-center justify-center gap-4 rounded-2xl bg-white text-gray-900 shadow-2xl"><h1 class="text-3xl font-extrabold tracking-tight text-gray-800">Bentornato!</h1> <div class="flex flex-col items-center justify-center gap-4"><div class="flex flex-col items-center gap-5 text-center"><!> <!></div></div> <div class="flex flex-col gap-4"><button type="button" class="rounded-xl border-2 border-gray-200 bg-gray-100 px-6 py-4 text-base font-semibold text-slate-600 transition hover:border-gray-300 hover:bg-gray-200">Disconnetti</button></div></div>'),Ke=_("<!> <!>",1);function na(p,o){Ne(o,!0),E({value:!0});let e=E({value:void 0}),g=Ae(E({value:""}));const y=E({value:se.complete!==null});y.value=se.complete!==null,e.value=o.data;async function c(){try{await Ue(ze.auth),await ie(),e.value=void 0}catch{M.value?Te(g).value="Errore durante la disconnessione. Riprova.":(e.value=void 0,await ie())}}const w=()=>{window.location.reload()};async function k(){const a=await fetch("/api/session",{method:"GET",credentials:"same-origin"});if(a.status===200){const s=await a.json();e.value=s}}me(()=>{Ee(g,Le("App"),!0),k()});var t=Ke(),l=re(t);{var v=a=>{var s=Fe();u(a,s)};L(l,a=>{M.value||a(v)})}var h=x(l,2);{var b=a=>{Re(a)},I=a=>{var s=Oe(),N=re(s);{var r=f=>{var d=Je(),T=x(i(d),2),P=i(T),Y=i(P);{var oe=m=>{var A=Pe();u(m,A)};L(Y,m=>{M.value||m(oe)})}var le=x(Y,2);Ge(le,k,m=>{var A=qe();u(m,A)},(m,A)=>{var D=Ye(),B=i(D),S=i(B),ce=i(S,!0);n(S);var J=x(S,2),H=i(J),ve=i(H,!0);n(H);var K=x(H,2),ue=i(K,!0);n(K),n(J),n(B),n(D),ne(de=>{G(ce,de),G(ve,e.value.FullName),G(ue,e.value.email)},[()=>Ce(e.value.FullName,e.value.email)]),u(m,D)}),n(P),n(T);var q=x(T,2),fe=i(q);fe.__click=[Be,c,w],n(q),n(d),u(f,d)};L(N,f=>{e.value!==void 0&&f(r)},!0)}u(a,s)};L(h,a=>{y.value?a(b):a(I,!1)})}u(p,t),je()}De(["click"]);export{na as component};
