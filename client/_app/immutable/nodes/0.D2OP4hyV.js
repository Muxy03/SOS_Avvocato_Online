import"../chunks/DsnmJJEf.js";import{o as _,a as L,s as j}from"../chunks/DL7c-2PW.js";import{p as O,a as t,j as c,f as h,b as i,c as S,h as C,a6 as R,d as l,r as d,s as T,n as $,a0 as A,t as D,i as k}from"../chunks/hMZFjhjB.js";import{s as G}from"../chunks/C3vF11sT.js";import{o as P,f as W}from"../chunks/CrL3HiYF.js";import{r as q,s as z}from"../chunks/Dchouehq.js";import{n as B,p as v}from"../chunks/CWuZaM_Z.js";import{O as F}from"../chunks/THKFehzh.js";import{M as H}from"../chunks/6qdKIYlW.js";var I=h("<h2>ERROR</h2>"),J=h('<div class="flex h-screen w-screen flex-col gap-5"><main class="flex-1 bg-blue-900"><div class="flex h-full w-full items-center justify-center"><!></div> <!></main></div>');function se(w,f){O(f,!0);const g=t({value:!0});let x=t({value:void 0});const b=t({value:""});t({value:B.complete!==null});let o=C(!1);v.error&&c(o,!0);async function E(){const a=await fetch("/api/session",{method:"GET",credentials:"same-origin"});a.status===200&&await a.json()}function s(){F.value=navigator.onLine}_(()=>{q(),R("App",{error:b});const a=P(W.auth,e=>{e&&(x.value=e,z(e))});return s(),window.addEventListener("online",s),window.addEventListener("offline",s),E(),()=>{a(),window.removeEventListener("online",s),window.removeEventListener("offline",s)}}),L(()=>{g.value||(async()=>await fetch("/api/session",{method:"DELETE",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:""}))()});var r=J(),m=l(r),n=l(m),y=l(n);j(y,()=>f.children),d(n);var M=T(n,2);H(M,{get showModal(){return k(o)},set showModal(e){c(o,e,!0)},header:e=>{var u=I();i(e,u)},children:(e,u)=>{$();var p=A();D(()=>G(p,v.error?.message)),i(e,p)},$$slots:{header:!0,default:!0}}),d(m),d(r),i(w,r),S()}export{se as component};
