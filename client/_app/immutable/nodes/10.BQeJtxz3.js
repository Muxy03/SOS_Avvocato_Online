import"../chunks/DsnmJJEf.js";import"../chunks/BYxMzdyx.js";import{p as ue,h as v,a as me,f as j,s as o,_ as fe,d as s,t as Y,i as t,b as w,c as ve,j as i,r as a}from"../chunks/7vUO3RyR.js";import{d as pe,r as be,s as B}from"../chunks/DlUQHRdJ.js";import{i as O}from"../chunks/Cs_X23zF.js";import{e as ge,i as xe}from"../chunks/QqMZMdb7.js";import{a as _e,b as k,e as ye}from"../chunks/BG9ubxqI.js";import{r as S}from"../chunks/Cn7woczV.js";import{b as he}from"../chunks/DGtL5vhV.js";import"../chunks/CrL3HiYF.js";function we(u){return new Promise((d,n)=>{const m=new FileReader;m.readAsDataURL(u),m.onload=()=>d(m.result),m.onerror=p=>n(p)})}function ke(u,d){const n=Array.from(u.target?.files||[]);d(n)}function je(u,d,n,m,p,b,g,c,x){confirm("Are you sure you want to cancel? All data will be lost.")&&(i(d,""),i(n,""),i(m,""),i(p,""),i(b,""),i(g,[],!0),i(c,!1),i(x,{to:t(d),subject:t(p),message:t(b)}))}var Ce=(u,d)=>i(d,!0),Be=j('<button type="button" class="text-sm font-medium text-blue-600 hover:text-blue-800">+ Add CC/BCC</button>'),Se=j('<div class="grid grid-cols-1 gap-4 md:grid-cols-2"><div><label for="cc-email" class="mb-2 block text-sm font-medium text-gray-700">CC</label> <input id="cc-email" type="email" placeholder="cc@example.com" class="w-full rounded-md border border-gray-300 px-3 py-2 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div><label for="bcc-email" class="mb-2 block text-sm font-medium text-gray-700">BCC</label> <input id="bcc-email" type="email" placeholder="bcc@example.com" class="w-full rounded-md border border-gray-300 px-3 py-2 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"/></div></div>'),Ae=(u,d,n)=>d(t(n).id),Ee=j('<div class="file-item flex items-center justify-between rounded-lg bg-gray-50 svelte-1qutyk1"><div class="flex items-center justify-center gap-1"><div><p class="font-medium text-gray-900"> </p> <p class="text-sm text-gray-500"> </p></div></div> <button type="button" class="font-medium text-red-500 hover:text-red-700">âœ•</button></div>'),Fe=j('<div class="space-y-2"></div>'),Me=j('<div class="flex items-center justify-center"><div class="flex w-[300px] flex-col items-center justify-center"><form class="flex flex-col items-center gap-1 rounded-lg bg-white shadow-lg p-5" method="POST" action="?/sendEmail"><div class="flex items-center justify-between gap-4"><label for="sender-mail" class="block text-sm font-medium text-gray-700">To</label> <input id="sender-mail" type="email" placeholder="recipient@example.com" class="w-full rounded-md border border-gray-300 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <!> <!> <div><label for="subject" class="mb-2 block text-sm font-medium text-gray-700">Subject <span class="text-red-500">*</span></label> <input id="subject" type="text" placeholder="Enter email subject" class="w-full rounded-md border border-gray-300 px-3 py-2 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"/></div> <div><label for="message" class="mb-2 block text-sm font-medium text-gray-700">Message <span class="text-red-500">*</span></label> <textarea id="message" rows="6" placeholder="Enter your message here..." class="w-full resize-y rounded-md border border-gray-300 px-3 py-2 focus:border-transparent focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea></div> <div class="flex flex-col items-center gap-2"><label for="files" class="mb-2 block text-sm font-medium text-gray-700">Attachments</label> <input id="files" type="file" multiple class="hidden"/> <!> <div class="text-sm text-gray-500"> </div></div> <div class="flex flex-col items-center justify-between"><div class="flex gap-3"><button type="button" class="rounded-md border border-gray-300 font-medium text-gray-700 transition-colors hover:bg-gray-50">Cancel</button> <button type="submit" class="h-[30px] w-[100px] transform rounded-md bg-blue-600 font-medium text-white transition-all hover:scale-105 hover:from-blue-700 hover:to-purple-700 disabled:transform-none disabled:cursor-not-allowed disabled:opacity-50"> </button></div></div></form></div></div>');function ze(u,d){ue(d,!0);let n=v("a.mussari@studenti.unipi.it"),m=v(""),p=v(""),b=v("TEST"),g=v("TESTING"),c=v(me([])),x=v(!1),C=v(!1),Z=fe(()=>({to:t(n),subject:t(b),message:t(g)})),P=v(void 0);function D(e){if(e===0)return"0 Bytes";const r=1024,l=["Bytes","KB","MB","GB"],f=Math.floor(Math.log(e)/Math.log(r));return parseFloat((e/Math.pow(r,f)).toFixed(2))+" "+l[f]}function ee(e){const r=e.map(l=>({id:Date.now()+Math.random(),file:l,name:l.name,size:l.size,type:l.type}));i(c,[...t(c),...r],!0)}function te(e){i(c,t(c).filter(r=>r.id!==e),!0)}var A=Me(),R=s(A),E=s(R),F=s(E),q=o(s(F),2);S(q),a(F);var J=o(F,2);{var re=e=>{var r=Be();r.__click=[Ce,C],w(e,r)};O(J,e=>{t(C)||e(re)})}var K=o(J,2);{var ae=e=>{var r=Se(),l=s(r),f=o(s(l),2);S(f),a(l);var _=o(l,2),y=o(s(_),2);S(y),a(_),a(r),k(f,()=>t(m),h=>i(m,h)),k(y,()=>t(p),h=>i(p,h)),w(e,r)};O(K,e=>{t(C)&&e(ae)})}var M=o(K,2),L=o(s(M),2);S(L),a(M);var z=o(M,2),U=o(s(z),2);be(U),a(z);var T=o(z,2),G=o(s(T),2);G.__change=[ke,ee],he(G,e=>i(P,e),()=>t(P));var $=o(G,2);{var se=e=>{var r=Fe();ge(r,21,()=>t(c),xe,(l,f)=>{var _=Ee(),y=s(_),h=s(y),N=s(h),le=s(N,!0);a(N);var X=o(N,2),ne=s(X,!0);a(X),a(h),a(y);var de=o(y,2);de.__click=[Ae,te,f],a(_),Y(ce=>{B(le,t(f).name),B(ne,ce)},[()=>D(t(f).size)]),w(l,_)}),a(r),w(e,r)};O($,e=>{t(c).length>0&&e(se)})}var H=o($,2),ie=s(H);a(H),a(T);var Q=o(T,2),V=s(Q),W=s(V);W.__click=[je,n,m,p,b,g,c,C,Z];var I=o(W,2),oe=s(I,!0);a(I),a(V),a(Q),a(E),_e(E,(e,r)=>ye?.(e,r),()=>async({formData:e})=>{i(x,!0),e.set("to",t(n)),e.set("subject",t(b)),e.set("message",t(g));for(const r of t(c)){const l=(await we(r.file)).split(",")[1];e.append("attachments",JSON.stringify({name:r.name,content:l}))}return async({result:r,update:l})=>{i(x,!1),r.type==="success"?await l():r.type==="failure"&&await l()}}),a(R),a(A),Y(()=>{B(ie,`${t(c).length??""} file(s) attached`),I.disabled=t(x),B(oe,t(x)?"Sending...":"Send Email")}),k(q,()=>t(n),e=>i(n,e)),k(L,()=>t(b),e=>i(b,e)),k(U,()=>t(g),e=>i(g,e)),w(u,A),ve()}pe(["click","change"]);function Le(u){ze(u,{})}export{Le as component};
