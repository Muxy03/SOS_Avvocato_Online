import"../chunks/DsnmJJEf.js";import{o as me}from"../chunks/B4cahDDo.js";import{l as E,m as _e,av as xe,o as pe,aw as Z,H as ge,v as he,w as be,x as Q,ax as V,K as U,J as W,I as X,A as z,Y as ye,y as we,ay as $,az as ee,aA as ae,a6 as ke,L as te,M as G,ao as Ie,f as _,e as i,r as o,t as oe,c as u,p as Ne,a as L,b as re,d as Ae,s as p,g as Ee}from"../chunks/CB0GAoS5.js";import{d as Le,s as M}from"../chunks/DuTLVp-_.js";import{i as O}from"../chunks/BKAMBxZp.js";import{n as se}from"../chunks/CXKqNFy3.js";import"../chunks/zen7sMON.js";import{s as Oe}from"../chunks/CH-7nw50.js";import{l as Te}from"../chunks/DuaHpsb3.js";import{a as je,f as De}from"../chunks/CrL3HiYF.js";import{c as ie,g as Se}from"../chunks/Dchouehq.js";import{O as R}from"../chunks/B6vS1P4H.js";const C=0,T=1,F=2;function He(x,l,e,b,y){E&&_e();var c=x,w=xe(),k=ke,t=V,n,v,g,h=w?W(void 0):X(void 0,!1,!1),I=w?W(void 0):X(void 0,!1,!1),a=!1;function s(r,f){a=!0,f&&($(N),ee(N),ae(k));try{r===C&&e&&(n?te(n):n=z(()=>e(c))),r===T&&b&&(v?te(v):v=z(()=>b(c,h))),r!==C&&n&&G(n,()=>n=null),r!==T&&v&&G(v,()=>v=null),r!==F&&g&&G(g,()=>g=null)}finally{f&&(ae(null),ee(null),$(null),Ie())}}var N=pe(()=>{if(t===(t=l()))return;let r=E&&Z(t)===(c.data===ge);if(r&&(c=he(),be(c),Q(!1),r=!0),Z(t)){var f=t;a=!1,f.then(d=>{f===t&&(U(h,d),s(T,!0))},d=>{if(f===t)throw U(I,d),s(F,!0),I.v}),E?e&&(n=z(()=>e(c))):ye(()=>{a||s(C,!0)})}else U(h,t),s(T,!1);return r&&Q(!0),()=>t=V});E&&(c=we)}var Ue=_('<div class="min-w-screen imtes-center flex min-h-screen justify-center"><img alt="Logo" class="animate-ping" width="100" height="100"/></div>');function ze(x){var l=Ue(),e=i(l);o(l),oe(()=>Oe(e,"src",Te)),u(x,l)}var Ge=_('<div class="offline-banner"><span class="offline-icon">ðŸ“¶</span> ModalitÃ  offline</div>'),Me=_('<div class="flex items-center justify-center gap-2 rounded-xl bg-yellow-100 text-center text-sm text-yellow-800"><span class="rounded bg-yellow-500 text-xs font-semibold text-white">Offline</span> Dati memorizzati localmente</div>'),Re=_('<a href="/home" target="_self" rel="noopener noreferrer" aria-label="/home" class="w-full"><div class="flex h-[60px] w-[280px] items-center gap-1 rounded-2xl bg-blue-500"><div class="flex h-10 w-10 flex-1/4 shrink-0 items-center justify-center rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 text-sm font-bold text-white"> </div> <div class="w-full flex-3/4 text-center"><h2 class="text-xl font-bold break-words text-white"> </h2> <p class="text-sm break-all text-white"> </p></div></div></a>'),Ce=_("<p>LOADING...</p>"),Fe=async(x,l,e)=>{await l(),e()},Pe=_('<div class="animate-slideUp mx-auto flex h-[250px] w-[300px] flex-col items-center justify-center gap-4 rounded-2xl bg-white text-gray-900 shadow-2xl"><h1 class="text-3xl font-extrabold tracking-tight text-gray-800">Bentornato!</h1> <div class="flex flex-col items-center justify-center gap-4"><div class="flex flex-col items-center gap-5 text-center"><!> <!></div></div> <div class="flex flex-col gap-4"><button type="button" class="rounded-xl border-2 border-gray-200 bg-gray-100 px-6 py-4 text-base font-semibold text-slate-600 transition hover:border-gray-300 hover:bg-gray-200">Disconnetti</button></div></div>'),Ye=_("<!> <!>",1);function ta(x,l){Ne(l,!0),L({value:!0});let e=L({value:void 0}),b=L({value:""});const y=L({value:se.complete!==null});y.value=se.complete!==null,e.value=l.data;async function c(){try{await je(De.auth),await ie(),e.value=void 0}catch{R.value?b.value="Errore durante la disconnessione. Riprova.":(e.value=void 0,await ie())}}const w=()=>{window.location.reload()};async function k(){const a=await fetch("/api/session",{method:"GET",credentials:"same-origin"});if(a.status===200){const s=await a.json();e.value=s}}me(()=>{k()});var t=Ye(),n=re(t);{var v=a=>{var s=Ge();u(a,s)};O(n,a=>{R.value||a(v)})}var g=p(n,2);{var h=a=>{ze(a)},I=a=>{var s=Ee(),N=re(s);{var r=f=>{var d=Pe(),j=p(i(d),2),P=i(j),Y=i(P);{var le=m=>{var A=Me();u(m,A)};O(Y,m=>{R.value||m(le)})}var ne=p(Y,2);He(ne,k,m=>{var A=Ce();u(m,A)},(m,A)=>{var D=Re(),B=i(D),S=i(B),ce=i(S,!0);o(S);var J=p(S,2),H=i(J),ve=i(H,!0);o(H);var K=p(H,2),ue=i(K,!0);o(K),o(J),o(B),o(D),oe(de=>{M(ce,de),M(ve,e.value.FullName),M(ue,e.value.email)},[()=>Se(e.value.FullName,e.value.email)]),u(m,D)}),o(P),o(j);var q=p(j,2),fe=i(q);fe.__click=[Fe,c,w],o(q),o(d),u(f,d)};O(N,f=>{e.value!==void 0&&f(r)},!0)}u(a,s)};O(g,a=>{y.value?a(h):a(I,!1)})}u(x,t),Ae()}Le(["click"]);export{ta as component};
