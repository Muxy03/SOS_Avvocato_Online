{"version":3,"file":"_server.ts-p9sCXYjp.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/emails/_server.ts.js"],"sourcesContent":["import { json } from \"@sveltejs/kit\";\nconst POST = async ({ request, cookies }) => {\n  try {\n    const { Id, Consultation } = await request.json();\n    console.log(Id, Consultation);\n    if (!Id || !Consultation) {\n      return json({ success: false, message: \"Consultation is required\" }, { status: 400 });\n    }\n    cookies.set(\"Email:\" + Id, Consultation, {\n      path: \"/\",\n      httpOnly: true,\n      secure: process.env.NODE_ENV === \"production\",\n      sameSite: \"strict\",\n      maxAge: 60 * 60 * 24 * 30\n      // 30 days in seconds\n    });\n    return json({ success: true, message: \"Consultation saved successfully\" });\n  } catch (error) {\n    console.error(\"Error saving Consultation:\", error);\n    return json({ success: false, message: \"Failed to save Consultation\" }, { status: 500 });\n  }\n};\nconst GET = async ({ request, cookies }) => {\n  try {\n    const { Id } = await request.json();\n    if (!Id) {\n      return json({ success: false, message: \"Id is required\" }, { status: 400 });\n    }\n    const cookie = cookies.getAll().find((cookie2) => cookie2.name === Id);\n    if (!cookie) {\n      return json({ success: false, message: \"No consultations found\" }, { status: 404 });\n    }\n    return json({ success: true, consultation: JSON.parse(cookie.value) });\n  } catch (error) {\n    console.error(\"Error retrieving consultations:\", error);\n    return json({ success: false, message: \"Failed to retrieve consultations\" }, { status: 500 });\n  }\n};\nconst DELETE = async ({ request, cookies }) => {\n  try {\n    const { userID } = await request.json();\n    if (!userID) {\n      return json({ success: false, message: \"UserID is required\" }, { status: 400 });\n    }\n    cookies.delete(userID, { path: \"/\" });\n    return json({ success: true, message: \"Consultation deleted successfully\" });\n  } catch (error) {\n    console.error(\"Error deleting consultation:\", error);\n    return json({ success: false, message: \"Failed to delete consultation\" }, { status: 500 });\n  }\n};\nexport {\n  DELETE,\n  GET,\n  POST\n};\n"],"names":[],"mappings":"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"}