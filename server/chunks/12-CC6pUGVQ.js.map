{"version":3,"file":"12-CC6pUGVQ.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/(auth)/register/_page.server.ts.js","../../../.svelte-kit/adapter-node/nodes/12.js"],"sourcesContent":["import { createUserWithEmailAndPassword, updateProfile } from \"firebase/auth\";\nimport { f as firebase } from \"../../../../chunks/firebase.js\";\nimport { fail, redirect } from \"@sveltejs/kit\";\nimport { addDoc, collection } from \"firebase/firestore\";\nconst actions = {\n  register: async ({ fetch, request }) => {\n    const formData = await request.formData();\n    const fullName = formData.get(\"fullName\");\n    const email = formData.get(\"email\");\n    const password = formData.get(\"password\");\n    try {\n      const user = (await createUserWithEmailAndPassword(firebase.auth, email, password)).user;\n      await updateProfile(user, {\n        displayName: fullName\n      });\n      const DocRef = await addDoc(collection(firebase.db, \"Users\"), {\n        id: user.uid,\n        FullName: fullName,\n        email: user.email,\n        createdAt: Date.now().toString(),\n        lastLogin: Date.now().toString(),\n        Emails: []\n      });\n      const User = {\n        DocId: DocRef.id,\n        id: user.uid,\n        FullName: fullName,\n        email,\n        createdAt: Date.now().toString(),\n        lastLogin: Date.now().toString(),\n        Emails: []\n      };\n      await fetch(\"/api/session\", {\n        method: \"POST\",\n        credentials: \"same-origin\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(User)\n      });\n    } catch (err) {\n      console.error(\"Registration error:\", err);\n      await fetch(\"/api/session\", {\n        method: \"DELETE\",\n        credentials: \"same-origin\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: \"\"\n      });\n      return fail(400, {\n        error: JSON.stringify(err)\n      });\n    }\n  }\n};\nconst load = ({ cookies }) => {\n  if (cookies.get(\"user_session\")) {\n    throw redirect(303, \"/home\");\n  }\n};\nexport {\n  actions,\n  load\n};\n","import * as server from '../entries/pages/(auth)/register/_page.server.ts.js';\n\nexport const index = 12;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/(auth)/register/_page.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/(auth)/register/+page.server.ts\";\nexport const imports = [\"_app/immutable/nodes/12.DzjEyQRG.js\",\"_app/immutable/chunks/DsnmJJEf.js\",\"_app/immutable/chunks/CB0GAoS5.js\",\"_app/immutable/chunks/DuTLVp-_.js\",\"_app/immutable/chunks/BKAMBxZp.js\",\"_app/immutable/chunks/B9xabBUp.js\",\"_app/immutable/chunks/Bu5Fj58j.js\",\"_app/immutable/chunks/B4cahDDo.js\",\"_app/immutable/chunks/CYgJF_JY.js\",\"_app/immutable/chunks/CZLX4HTG.js\",\"_app/immutable/chunks/CH-7nw50.js\",\"_app/immutable/chunks/BChRSR2T.js\",\"_app/immutable/chunks/CrL3HiYF.js\",\"_app/immutable/chunks/KjYeVjkE.js\"];\nexport const stylesheets = [];\nexport const fonts = [];\n"],"names":[],"mappings":"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"}